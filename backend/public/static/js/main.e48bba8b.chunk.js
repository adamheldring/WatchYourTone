(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(45)},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),s=a.n(o),c=a(1),l=a(2),i=a(4),m=a(3),u=a(5),p=a(22),d=a(11),h=(a(30),function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"header-container"},r.a.createElement("div",{className:"header__mainHeading-container"},r.a.createElement("h2",{className:"header__mainHeading"},"WATCH YOUR TONE"),r.a.createElement("h2",{className:"header__mainHeading header__mainHeading--shadow"},"WATCH YOUR TONE")))}}]),t}(r.a.Component)),g=a(7),f=a.n(g),b=a(21),v=a.n(b),E="https://watchyourtone.onrender.com/",y=function(){return[new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1)]},S=function(){return[new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1)]},C={noise:{type:"white"},envelope:{attack:.001,decay:.15,sustain:.05,release:.2}},N={frequency:200,envelope:{attack:.001,decay:.05,release:.05},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5},w=["C5","B4","A4","G4","F4","E4","D4","C4"],O=140,k="triangle",I="untitled",j="unknown",F=["./assets/kick-100-inv.png","./assets/snare-100-inv.png","./assets/hihat-100-inv.png"],T=["6BFFE9","74F5EA","7DECEB","86E3ED","8FDAEE","98D1F0","A1C8F1","AABFF2","B3B5F4","BCACF5","C5A3F7","CE9AF8","D791F9","E088FB","E97FFC","F276FE"],A=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("tr",{className:"synthKey-row"},r.a.createElement("td",{className:"tableRowExplainer tableRowExplainer--synth"},w[this.props.synthKeyIndex].slice(0,1)),this.props.bars.map(function(t,a){return r.a.createElement("td",{className:e.props.synthKeyMatrix[e.props.synthKeyIndex][a]?"noteBox noteBox--active":"noteBox",key:a,onClick:function(){return e.props.handleNoteClick(a)}})}))}}]),t}(r.a.Component),_=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).passUpNoteClick=function(e,t){a.props.handleNoteClick(e,t)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.synth,n=t.activeBar;return r.a.createElement("div",{className:"synth-container"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",{className:"tableRowExplainer tableRowExplainer--bars"},r.a.createElement("img",{src:"./assets/note-100-inv.png",className:"drumIcon",alt:"note"})),a[0].map(function(e,t){return r.a.createElement("th",{key:t,style:{backgroundColor:t===n?"#".concat(T[t]):"darkgrey"},className:t===n?"barIndicator barIndicator--active":"barIndicator"},t+1)}))),r.a.createElement("tbody",null,a.map(function(t,n){return r.a.createElement(A,{key:n,synthKeyIndex:n,bars:a[n],synthKeyMatrix:a,handleNoteClick:function(t){return e.passUpNoteClick(n,t)}})}))))}}]),t}(r.a.Component),B=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("tr",{className:"seqInstrument-row"},r.a.createElement("td",{className:"tableRowExplainer tableRowExplainer--drums"},r.a.createElement("img",{src:F[this.props.drumIndex],className:"drumIcon",alt:"drum"})),this.props.bars.map(function(t,a){return r.a.createElement("td",{className:e.props.drumMatrix[e.props.drumIndex][a]?"beatBox beatBox--active":"beatBox",key:a,onClick:function(){return e.props.handleDrumClick(a)}})}))}}]),t}(r.a.Component),x=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).passUpBeatClick=function(e,t){a.props.handleDrumClick(e,t)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.drums,n=t.activeBar;return r.a.createElement("div",{className:"drums-container"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",{className:"tableRowExplainer tableRowExplainer--bars"}),a[0].map(function(e,t){return r.a.createElement("th",{key:t,style:{backgroundColor:t===n?"#".concat(T[t]):"darkgrey"},className:t===n?"barIndicator barIndicator--active":"barIndicator"},t+1)}))),r.a.createElement("tbody",null,a.map(function(t,n){return r.a.createElement(B,{key:n,drumIndex:n,bars:a[n],drumMatrix:a,handleDrumClick:function(t){return e.passUpBeatClick(n,t)}})}))))}}]),t}(r.a.Component),L=(a(31),a(32),a(33),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleBpmChange=function(e){a.props.changeBpm(e.target.value)},a.handleWaveChange=function(e){a.props.changeWaveForm(e.target.value)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.bpm,a=e.synthWaveForm;return r.a.createElement("section",{className:"settings-container"},r.a.createElement("h2",{className:"composerPage-headline"},"SETTINGS"),r.a.createElement("div",{className:"settings-container__bpm"},r.a.createElement("h3",{className:"section-heading"},"TEMPO: ",r.a.createElement("span",{className:"highlighted"},this.props.bpm)," BPM")),r.a.createElement("div",{className:"meters"},r.a.createElement("input",{name:"bpm",type:"range",min:"40",max:"300",value:t,onChange:this.handleBpmChange})),r.a.createElement("div",{className:"waveFormSetting-container"},r.a.createElement("div",{className:"settings-container__waveform"},r.a.createElement("h3",{className:"section-heading section-heading--waveform"},"WAVEFORM: ",r.a.createElement("span",{className:"highlighted"},this.props.synthWaveForm.toUpperCase()))),r.a.createElement("label",{className:"radio-button-container",htmlFor:"triangle"},r.a.createElement("img",{src:"./assets/wf-triangle-small.png",className:"waveform-image",alt:"triangle-waveform"}),r.a.createElement("input",{type:"radio",id:"triangle",name:"triangle",value:"triangle",onChange:this.handleWaveChange,checked:"triangle"===a}),r.a.createElement("span",{className:"custom-radio-button"})),r.a.createElement("br",null),r.a.createElement("label",{className:"radio-button-container",htmlFor:"square"},r.a.createElement("img",{src:"./assets/wf-square-small.png",className:"waveform-image",alt:"square-waveform"}),r.a.createElement("input",{type:"radio",id:"square",name:"square",value:"square",onChange:this.handleWaveChange,checked:"square"===a}),r.a.createElement("span",{className:"custom-radio-button"})),r.a.createElement("br",null),r.a.createElement("label",{className:"radio-button-container",htmlFor:"sawtooth"},r.a.createElement("img",{src:"./assets/wf-sawtooth-small.png",className:"waveform-image",alt:"sawtooth-waveform"}),r.a.createElement("input",{type:"radio",id:"sawtooth",name:"sawtooth",value:"sawtooth",onChange:this.handleWaveChange,checked:"sawtooth"===a}),r.a.createElement("span",{className:"custom-radio-button"})),r.a.createElement("br",null),r.a.createElement("label",{className:"radio-button-container",htmlFor:"sine"},r.a.createElement("img",{src:"./assets/wf-sine-small.png",className:"waveform-image",alt:"sine-waveform"}),r.a.createElement("input",{type:"radio",id:"sine",name:"sine",value:"sine",onChange:this.handleWaveChange,checked:"sine"===a}),r.a.createElement("span",{className:"custom-radio-button"})),r.a.createElement("br",null)))}}]),t}(r.a.Component)),W=(a(34),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={synth:y(),drums:S(),activeBar:0,resetTransport:!1,bpm:140,synthWaveForm:"triangle",loadedSongTitle:I,loadedSongComposer:j},a.checkForActiveSession=function(){try{sessionStorage&&sessionStorage.getItem("drums")&&a.setState({drums:JSON.parse(sessionStorage.getItem("drums")),synth:JSON.parse(sessionStorage.getItem("synth")),bpm:sessionStorage.getItem("bpm"),synthWaveForm:sessionStorage.getItem("waveform"),loadedSongTitle:sessionStorage.getItem("loadedSongTitle"),loadedSongComposer:sessionStorage.getItem("loadedSongComposer")},function(){return a.handleBpmChange(a.state.bpm)})}catch(e){console.log(e)}},a.startPlaying=function(){v()(f.a.context,"#playButton").then(function(){f.a.Transport.start("+0.2")})},a.stopPlaying=function(){f.a.Transport.stop()},a.rewindPlaying=function(){a.setState({resetTransport:!0,activeBar:0})},a.handleDrumClick=function(e,t){var n=a.state.drums;n[e][t]=!a.state.drums[e][t],a.setState({drums:n})},a.handleNoteClick=function(e,t){var n=a.state.synth;n[e][t]=!a.state.synth[e][t],a.setState({synth:n})},a.handleBpmChange=function(e){a.setState({bpm:e},function(){f.a.Transport.bpm.rampTo(a.state.bpm,.2)})},a.changeWaveForm=function(e){a.setState({synthWaveForm:e})},a.clearMatrix=function(){a.setState({synth:y(),drums:S(),bpm:O,synthWaveForm:k,loadedSongTitle:I,loadedSongComposer:j},function(){return a.handleBpmChange(a.state.bpm)}),sessionStorage.removeItem("drums"),sessionStorage.removeItem("synth"),sessionStorage.removeItem("bpm"),sessionStorage.removeItem("waveform"),sessionStorage.removeItem("loadedSongTitle"),sessionStorage.removeItem("loadedSongComposer")},a.soundGenerator=function(){f.a.Transport.bpm.value=a.state.bpm,f.a.context.latencyHint="fastest";var e=new f.a.Freeverb(.05,15e3).toMaster(),t=new f.a.Gain(.6);t.connect(e);var n=[new f.a.MembraneSynth,new f.a.NoiseSynth(C),new f.a.MetalSynth(N)];n.forEach(function(e){return e.connect(t)});var r=[];a.state.synth.forEach(function(e,t){return r.push(new f.a.Synth)}),r.forEach(function(e){return e.connect(t)});var o=0;f.a.Transport.scheduleRepeat(function(e){a.state.resetTransport&&(o=0,a.setState({resetTransport:!1,activeBar:0}));var t=o%16;if(a.setState({activeBar:t}),r[0].oscillator.type!==a.state.synthWaveForm){var s=r.map(function(e){return new Promise(function(t){e.oscillator.type=a.state.synthWaveForm,t()})});Promise.all(s).then()}r.forEach(function(n,r){a.state.synth[r][t]&&n.triggerAttackRelease(w[r],"8n",e)}),n.forEach(function(r,o){if(a.state.drums[o][t])switch(o){default:n[o].triggerAttackRelease("C1","8n",e);break;case 1:n[o].triggerAttackRelease("16n");break;case 2:n[o].triggerAttackRelease("16n",e,.6)}}),o++},"8n")},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){console.log("* Optimized for Chrome Desktop *"),console.log("Adam Heldring \u2013 an experiment exploring the Web Audio API and Tone.js"),console.log("wyt@adamheldring.com"),f.a.Transport.cancel(),this.soundGenerator(),this.checkForActiveSession()}},{key:"componentDidUpdate",value:function(e,t){this.props.newSongLoaded&&(this.checkForActiveSession(),this.props.resetSongLoader()),this.state!==t&&(sessionStorage.setItem("drums",JSON.stringify(this.state.drums)),sessionStorage.setItem("synth",JSON.stringify(this.state.synth)),sessionStorage.setItem("bpm",this.state.bpm),sessionStorage.setItem("waveform",this.state.synthWaveForm),sessionStorage.setItem("loadedSongTitle",this.state.loadedSongTitle),sessionStorage.setItem("loadedSongComposer",this.state.loadedSongComposer))}},{key:"componentWillUnmount",value:function(){f.a.Transport.stop()}},{key:"render",value:function(){var e=this,t=this.state,a=t.synth,n=t.drums,o=t.activeBar,s=t.bpm,c=t.synthWaveForm,l=t.loadedSongTitle,i=t.loadedSongComposer;return r.a.createElement("div",{className:"musicMaker-wrapper"},r.a.createElement("section",{className:"sequenser-container"},r.a.createElement("h1",{className:"composerPage-headline"},"COMPOSE"),"untitled"!==this.state.loadedSongTitle?r.a.createElement("h3",{className:"section-heading"},"SONG:"," ",r.a.createElement("span",{className:"highlighted"},'"'.concat(l.toUpperCase(),'" '))," ","BY:"," ",r.a.createElement("span",{className:"highlighted"},i.toUpperCase())):r.a.createElement("h3",{className:"section-heading"},r.a.createElement("span",{className:"highlighted"},"NEW SONG")),r.a.createElement(_,{synth:a,activeBar:o,handleNoteClick:function(t,a){return e.handleNoteClick(t,a)}}),r.a.createElement(x,{drums:n,activeBar:o,handleDrumClick:function(t,a){return e.handleDrumClick(t,a)}}),r.a.createElement("div",{className:"transportControls"},r.a.createElement("button",{onClick:this.startPlaying,className:"transportControl transportControl__button",id:"playButton"},r.a.createElement("span",{className:"transportControl__symbol"},r.a.createElement("i",{className:"fas fa-play"})),r.a.createElement("br",null),"PLAY"),r.a.createElement("button",{onClick:this.stopPlaying,className:"transportControl transportControl__button"},r.a.createElement("span",{className:"transportControl__symbol transportControl__symbol--stop"},r.a.createElement("i",{className:"fas fa-stop"})),r.a.createElement("br",null),"STOP"),r.a.createElement("button",{onClick:this.rewindPlaying,className:"transportControl transportControl__button"},r.a.createElement("span",{className:"transportControl__symbol"},r.a.createElement("i",{className:"fas fa-backward"})),r.a.createElement("br",null),"REWIND"),r.a.createElement("button",{onClick:this.clearMatrix,className:"transportControl transportControl__button"},r.a.createElement("span",{className:"transportControl__symbol"},r.a.createElement("i",{className:"fas fa-eject"})),r.a.createElement("br",null),"CLEAR"))),r.a.createElement(L,{bpm:s,changeBpm:function(t){return e.handleBpmChange(t)},synthWaveForm:c,changeWaveForm:function(t){return e.changeWaveForm(t)},loadedSongTitle:l,loadedSongComposer:i}))}}]),t}(r.a.Component)),D=a(15),P=(a(35),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={songTitle:"",composer:"",songList:[],songToLoad:"",loadedSong:""},a.handleFormChange=function(e){"text"===e.target.type?a.setState(Object(D.a)({},e.target.name,e.target.value.toUpperCase())):a.setState(Object(D.a)({},e.target.name,e.target.value))},a.clearFields=function(){a.setState({songTitle:"",composer:""})},a.submitSave=function(e){e.preventDefault();var t=a.state,n=t.songTitle,r=t.composer,o={songId:Date.now(),createdDate:new Date,songTitle:n,composer:r,drums:sessionStorage.getItem("drums"),synth:sessionStorage.getItem("synth"),bpm:sessionStorage.getItem("bpm"),waveform:sessionStorage.getItem("waveform")};fetch("".concat(E,"/songs/"),{headers:{"Content-Type":"application/json"},method:"Post",body:JSON.stringify(o)}).then(function(e){console.log("Request success: ",e),sessionStorage.setItem("loadedSongTitle",n),sessionStorage.setItem("loadedSongComposer",r),a.loadSongList(),a.props.loadNewSong(!0),a.clearFields()}).catch(function(e){console.log("Request failure: ",e),alert(e)})},a.submitLoad=function(e){e.preventDefault();var t=a.state.songToLoad;t?fetch("".concat(E,"/songs/").concat(t)).then(function(e){return e.json()}).then(function(e){a.setState({loadedSong:e},function(){a.loadSongToStorage()})}):console.log("Choose a song to load...")},a.loadSongToStorage=function(){var e=a.state.loadedSong;sessionStorage.setItem("drums",e.drums),sessionStorage.setItem("synth",e.synth),sessionStorage.setItem("bpm",e.bpm),sessionStorage.setItem("waveform",e.waveform),sessionStorage.setItem("loadedSongTitle",e.songTitle),sessionStorage.setItem("loadedSongComposer",e.composer),a.props.loadNewSong(!0)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadSongList()}},{key:"loadSongList",value:function(){var e=this;fetch("".concat(E,"/songs/")).then(function(e){return e.json()}).then(function(t){e.setState({songList:t})})}},{key:"render",value:function(){var e=this.state,t=e.songTitle,a=e.composer,n=e.songList;return r.a.createElement("div",{className:"page-wrapper page-wrapper--saveLoad"},r.a.createElement("div",{className:"saveForm-container"},r.a.createElement("h1",{className:"composerPage-headline composerPage-headline--saveLoad"},"SAVE:"),r.a.createElement("form",{id:"postingForm",className:"postingForm",onSubmit:this.submitSave},r.a.createElement("input",{className:"formInput formInput__field",value:t,type:"text",placeholder:"SONG TITLE",name:"songTitle",required:!0,onChange:this.handleFormChange}),r.a.createElement("input",{className:"formInput formInput__field",value:a,type:"text",placeholder:"COMPOSER NAME",name:"composer",required:!0,onChange:this.handleFormChange}),r.a.createElement("input",{className:"submitButton formInput__button formInput__button--save",type:"submit",value:"SAVE"}))),r.a.createElement("div",{className:"loadForm-container"},r.a.createElement("h1",{className:"composerPage-headline composerPage-headline--saveLoad"},"LOAD:"),r.a.createElement("form",{id:"loadingForm",className:"loadingForm",onSubmit:this.submitLoad},r.a.createElement("select",{name:"songToLoad",className:"formInput formInput formInput__select",onChange:this.handleFormChange,size:"5"},n.sort(function(e,t){return e.songId<t.songId?1:t.songId<e.songId?-1:0}).map(function(e,t){return r.a.createElement("option",{key:t,value:e.songId},"".concat(e.songTitle.toUpperCase()," (").concat(e.composer.toUpperCase(),")"))})),r.a.createElement("input",{className:"submitButton formInput__button formInput__button--load",type:"submit",value:"LOAD"})),"\xa0"))}}]),t}(r.a.Component)),R=(a(36),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={newSongLoaded:!1},a.loadNewSong=function(e){a.setState({newSongLoaded:e})},a.resetSongLoader=function(){a.setState({newSongLoaded:!1})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"page-wrapper page-wrapper--composerPage"},r.a.createElement(W,{newSongLoaded:this.state.newSongLoaded,resetSongLoader:this.resetSongLoader}),r.a.createElement(P,{loadNewSong:function(t){return e.loadNewSong(t)}}))}}]),t}(r.a.Component)),M=(a(37),function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"page-wrapper page-wrapper--404"},r.a.createElement("h1",null,"404"))}}]),t}(r.a.Component)),q=(a(38),function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement("div",null,r.a.createElement(h,null),r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",component:R}),r.a.createElement(d.a,{component:M}))))}}]),t}(r.a.Component));a(44);s.a.render(r.a.createElement(q,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.e48bba8b.chunk.js.map